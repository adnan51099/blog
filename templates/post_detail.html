{% extends "base.html" %}

{% load crispy_forms_tags %}

{% block title %} {{ title }} | {{ block.super }} {% endblock title %}

{% block content %}
<div class="col-sm-6 col-sm-offset-3 post-detail-item">
	<h1>Detail View</h1>
	{% if instance.image %}
	<img src="{{ instance.image.url }}" class="img-responsive"/>
	{% endif %}

	{% if instance.video %}
	<video width="100%" height="240" controls>
	  <source src="{{ instance.video.url }}" type="video/mp4">
	</video>
	{% endif %}
	<h1>{{ title }} <small>{% if instance.draft %} <span style="color: red;">Draft</span>{% endif %} {{ instance.timestamp }} </small></h1>
	
	<!-- getting username -->
	{% if instance.user.get_full_name %}
		<h4 style="color: gray;">Author: {{ instance.user.get_full_name }}</h4>
	{% endif %}
	
	<!-- Social links -->

	<!-- <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}" target="_blank">
	Facebook
	</a>

	<a href="https://twitter.com/home?status={{ share_string }}%20{{ request.build_absolute_uri }}" target="_blank">
	Twitter
	</a>

	<a href='https://plus.google.com/share?url={{ request.build_absolute_uri }}' target="_blank">Google+</a>

	<a href="https://www.linkedin.com/shareArticle?mini=true&url{{ request.build_absolute_uri }}&title={{ instance.title }}&summary={{ share_string }}&source={{ request.build_absolute_uri }}" target="_blank">
	Linkedin
	</a> -->

	<!-- content -->
	{{ instance.get_markdown }}
	<hr>
	<a href="{{ instance.get_absolute_url }}edit/" class="btn btn-info">Edit Post</a><br>
	<hr>

	<!-- fb like and share -->
	<div class="fb-like" data-href="{{ request.build_absolute_uri }}" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>


	<div>
		<p class="lead">Comments - {{ comments_count }}</p>
		<form method="POST" action=".">{% csrf_token %}
			{{ comment_form|crispy }}
			<input type="submit" value="Post Comment" class="btn btn-info">
		</form>
		<hr/>
		{% for comment in comments %}
		<blockquote>
			<h3>{{ comment.user.get_full_name }}</h3>
			<p>{{ comment.content }}</p>
			<footer>{{ comment.timestamp|timesince }} ago <cite title="Source Title"></cite>
				<div class="fb-like" data-href="{{ request.build_absolute_uri }}" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>
			</footer>
		</blockquote>
		<hr/>
		{% endfor %}
	</div>

	<!-- fb comment section -->
<!-- 	<div class="fb-comments" data-href="{{ request.build_absolute_uri }}" data-numposts="5"></div>
 -->
</div>
{% endblock content %}
